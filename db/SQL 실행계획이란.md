# SQL 실행계획이란

# 실행계획이란?(Execution Plan)

- SQL에서 요구한 사항을 처리하기 위한 절차와 방법을 의미한다.
- 동일한 SQL 문에 대해서 결과를 내는데, 처리방법(실행계획) 에 따라서 실행시간(성능) 이 서로 다를 수 있다.
- 최적의 실행계획을 수립하기위해 DBMS 에서는 옵티마이저가 그 기능을 담당한다.

## 왜 필요한가??

- 자신이 작성한 쿼리의 실행계획을 재대로 파악하지 못하면 나중에 데이터가 많아지며 성능저하가 급격히 이루어지더라도 재대로 문제점을 파악할 수 없다.
- EXPLAIN 으로 출력을 해 보면 JOIN 을 할 때 얼마나 좋은지를 알 수 있다.
    - 대략적으로 쿼리를 실행하기 위해 검사해야하는 행 수 들을 대략 알려준다.
    - 걸리는 시간, 순서를 보며 INDEX 를 사용해야 할 지 등을 판단 할 수 있다.
- 실행수 나타나는 분석을 통해 SQL 의 비 효율적인 부분을 확인하고 쿼리 성능 향상을 위한 수정방안도 생각해 볼 수 있다.

(실행계획 - 실행계획 결과로 분석 - 개선점 찾기 및 적용 순으로 반복하며 하는것이 좋을것 같다.)

## MYSQL 실행계획 분석

- 간단하게 MYSQL 을 통한 실행계획을 분석 방법을 보자.
- 일단 MySQL에서 쿼리의 실행 계획을 확인하려면 EXPLAIN 명령을 사용하면 된다.
    - EXPLAIN EXTENDED , EXPLAIN PARTITIONS 명령을 통해 상세한 실행 계획을 확인 할 수도 있다.
- EX)

    ```sql
    EXPLAIN
    SELECT e.emp_no, e.name, s.from_date
    FROM employees e, salaries s
    WHERE e.emp_no = s.emp_no
    LIMIT 100;
    ```

- 이런 식으로 사용하면 된다.
- 실행순서는 위에서 아래로 순서대로 표현된다.(UNION , 서브쿼리 같은 경우는 순서대로가 아닐 수 있음)
- 출력된 실행계획에서 위쪽에 나올 결과일 수록 쿼리의 가장 바깥이거나, 먼저 접근한 테이블이고, 내려갈 수록 쿼리의 안쪽이거나, 나중에 접근한 테이블에 해당한다.
- 그리고 UPDATE, INSERT, DELETE 문장은 실행 계획을 확인할 방법이 없으니 WHERE 조건이 같은 SELECT 문을 만들어서 대략적으로 계획을 확인해 볼 수 있다.

### 마치며

- 실행계획은 RDBMS 에 따라 비슷하지만 다른 부분도 있으므로 사용하는 DB 에 따라 각 DB 에 맞는 실행계획 보는법을 찾아보면서 사용해봐야겠다

참고

[https://enterone.tistory.com/232](https://enterone.tistory.com/232)